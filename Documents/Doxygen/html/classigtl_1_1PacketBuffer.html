<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>igtl::PacketBuffer Class Reference</title>
<link href="DoxygenStyle.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!--  Section customized for INSIGHT : Tue Jul 17 01:02:45 2001 -->
<center>
<a href="index.html" class="qindex">Main Page</a>&nbsp;&nbsp; 
<!--<a href="modules.html" class="qindex">Groups</a>&nbsp;&nbsp;-->
<a href="namespaces.html" class="qindex">Namespace List</a>&nbsp;&nbsp;
<a href="hierarchy.html" class="qindex">Class Hierarchy</a>&nbsp;&nbsp;
<a href="classes.html" class="qindex">Alphabetical List</a>&nbsp;&nbsp;
<a href="annotated.html" class="qindex">Compound List</a>&nbsp;&nbsp; 
<a href="files.html" class="qindex">File List</a>&nbsp;&nbsp; 
<a href="namespacemembers.html" class="qindex">Namespace Members</a>&nbsp;&nbsp;
<a href="functions.html" class="qindex">Compound Members</a>&nbsp;&nbsp; 
<a href="globals.html" class="qindex">File Members</a>&nbsp;&nbsp;
<!--<a href="pages.html" class="qindex">Concepts</a>-->
</center>
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="namespaceigtl.html">igtl</a></li><li class="navelem"><a href="classigtl_1_1PacketBuffer.html">PacketBuffer</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle"><div class="title">igtl::PacketBuffer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="igtlMessageRTPWrapper_8h_source.html">igtlMessageRTPWrapper.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8d002bd13ef9055ea5b179a88bee42fe" id="r_a8d002bd13ef9055ea5b179a88bee42fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d002bd13ef9055ea5b179a88bee42fe">PacketBuffer</a> ()</td></tr>
<tr class="memitem:ab706c2df0e0cdc930df816a065501c08" id="r_ab706c2df0e0cdc930df816a065501c08"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab706c2df0e0cdc930df816a065501c08">~PacketBuffer</a> ()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-attribs" class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a20760b9b36a234e56ff43cf5e990ae00" id="r_a20760b9b36a234e56ff43cf5e990ae00"><td class="memItemLeft" align="right" valign="top">std::vector&lt; unsigned char &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20760b9b36a234e56ff43cf5e990ae00">pBsBuf</a></td></tr>
<tr class="memdesc:a20760b9b36a234e56ff43cf5e990ae00"><td class="mdescLeft">&#160;</td><td class="mdescRight">buffer of Packet contained  <br /></td></tr>
<tr class="memitem:a9ea102f42f8e5de41b16518788b10d18" id="r_a9ea102f42f8e5de41b16518788b10d18"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ea102f42f8e5de41b16518788b10d18">pPacketLengthInByte</a></td></tr>
<tr class="memdesc:a9ea102f42f8e5de41b16518788b10d18"><td class="mdescLeft">&#160;</td><td class="mdescRight">length of udp packet size in byte from 0 to number of packet - 1  <br /></td></tr>
<tr class="memitem:a63fbe433139a8306aaf2926f7a14873e" id="r_a63fbe433139a8306aaf2926f7a14873e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a63fbe433139a8306aaf2926f7a14873e">totalLength</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classigtl_1_1MessageRTPWrapper.html">MessageRTPWrapper</a> class is the class to fragment/assemble messages from all type classes into UDP packets, as The message classes can be used for wrapping V3 OpenIGTLink message byte streams into UDPPackets. The class can also unwrapping the RTPPackets into OpenIGTLink messages.</p>
<p>The typical wrapping or unwrapping procedures is demonstrated in the <a class="el" href="classigtl_1_1VideoStreamIGTLinkServer.html">VideoStreamIGTLinkServer</a>, VieoStreamIGTLinkReceiver and igtlMessageRTPWrapperTest</p>
<p>Here, an V3 image message is used as an example. Assume the length of image is 25000 with 57 byte of meta information, which is longer than the RTP Packet payload size 8900, so the message is fragmented into several RTPPackets. 0 58 70 142 25142 25160 25199</p>
<p>|____________|___________________|_______________|_____________________________|___________________|_____________| m_Header m_ExtendedHeader m_ImageHeader m_Image m_MetaDataHeader m_MetaData m_Body m_Content (old m_Body)</p>
<p>All the fragments will be attached with a 12 bytes RTP Header, the RTP Header has the format: 0--------&mdash;4---------&mdash;8---------------------&mdash;16----------------------&mdash;31 bit number </p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md0"></a>
|Version|P|X| CC |M| Payload Type | Sequence Number |</h2>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1"></a>
| Time Stamp |</h2>
<h2 class="doxsection"><a class="anchor" id="autotoc_md2"></a>
| Source Synchronization Identifier(SSRC) |</h2>
<p>Fragment 1, total length 8912: 0 12 70 82 154 8912 |__________|____________|___________________|_______________|________________________________________| RTPHeader m_Header m_ExtendedHeader1 m_ImageHeader m_Image1 (section 1)</p>
<p>Fragment 2, total length 8912: 0 12 70 82 154 8912 |__________|____________|___________________|_______________|________________________________________| RTPHeader m_Header m_ExtendedHeader2 m_ImageHeader m_Image2 (section 2)</p>
<p>Fragment 3, total length 7695, for the simplicity, M_Meta* here includs the m_MetaDataHeader and m_MetaData: 0 12 70 82 154 7636 7695 |__________|____________|___________________|_______________|_________________________|_________| RTPHeader m_Header m_ExtendedHeader3 m_ImageHeader m_Image3 (section 3) M_Meta*</p>
<p>The m_image is fragmented into three parts: 0 8758 17516 25000 |________________________|_______________________|_________________| m_Image1 m_Image2 m_Image3</p>
<p>The last two bytes are used to reorder the packets if they arrive at different time points. 0x8000 indicates the first RTP packet m_ExtendedHeader1 | 0xXXXX 0xXXXX..... 0xXXXX 0xXXXX |0x8000| First 10 Bytes from m_ExtendedHeader</p>
<p>The following RTP packet increments the field 0x8000 m_ExtendedHeader2 | 0xXXXX 0xXXXX..... 0xXXXX 0xXXXX |0x8000| First 10 Bytes from m_ExtendedHeader</p>
<p>0xE000 indicates the last RTP packet m_ExtendedHeader3 | 0xXXXX 0xXXXX..... 0xXXXX 0xXXXX |0x8000| First 10 Bytes from m_ExtendedHeader </p>

<p class="definition">Definition at line <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00112">112</a> of file <a class="el" href="igtlMessageRTPWrapper_8h_source.html">igtlMessageRTPWrapper.h</a>.</p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8d002bd13ef9055ea5b179a88bee42fe" name="a8d002bd13ef9055ea5b179a88bee42fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d002bd13ef9055ea5b179a88bee42fe">&#9670;&#160;</a></span>PacketBuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">igtl::PacketBuffer::PacketBuffer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00114">114</a> of file <a class="el" href="igtlMessageRTPWrapper_8h_source.html">igtlMessageRTPWrapper.h</a>.</p>

<p class="reference">References <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00035">PacketMaximumBufferNum</a>, <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00117">pBsBuf</a>, <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00116">pPacketLengthInByte</a>, <a class="el" href="igtlGeneralSocket_8h_source.html#l00057">RTP_HEADER_LENGTH</a>, <a class="el" href="igtlGeneralSocket_8h_source.html#l00058">RTP_PAYLOAD_LENGTH</a>, and <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00118">totalLength</a>.</p>

</div>
</div>
<a id="ab706c2df0e0cdc930df816a065501c08" name="ab706c2df0e0cdc930df816a065501c08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab706c2df0e0cdc930df816a065501c08">&#9670;&#160;</a></span>~PacketBuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">igtl::PacketBuffer::~PacketBuffer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00115">115</a> of file <a class="el" href="igtlMessageRTPWrapper_8h_source.html">igtlMessageRTPWrapper.h</a>.</p>

<p class="reference">References <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00117">pBsBuf</a>, and <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00116">pPacketLengthInByte</a>.</p>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Field Documentation</h2>
<a id="a20760b9b36a234e56ff43cf5e990ae00" name="a20760b9b36a234e56ff43cf5e990ae00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20760b9b36a234e56ff43cf5e990ae00">&#9670;&#160;</a></span>pBsBuf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;unsigned char&gt; igtl::PacketBuffer::pBsBuf</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>buffer of Packet contained </p>

<p class="definition">Definition at line <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00117">117</a> of file <a class="el" href="igtlMessageRTPWrapper_8h_source.html">igtlMessageRTPWrapper.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00114">PacketBuffer()</a>, and <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00115">~PacketBuffer()</a>.</p>

</div>
</div>
<a id="a9ea102f42f8e5de41b16518788b10d18" name="a9ea102f42f8e5de41b16518788b10d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ea102f42f8e5de41b16518788b10d18">&#9670;&#160;</a></span>pPacketLengthInByte</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; igtl::PacketBuffer::pPacketLengthInByte</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>length of udp packet size in byte from 0 to number of packet - 1 </p>

<p class="definition">Definition at line <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00116">116</a> of file <a class="el" href="igtlMessageRTPWrapper_8h_source.html">igtlMessageRTPWrapper.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00114">PacketBuffer()</a>, and <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00115">~PacketBuffer()</a>.</p>

</div>
</div>
<a id="a63fbe433139a8306aaf2926f7a14873e" name="a63fbe433139a8306aaf2926f7a14873e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63fbe433139a8306aaf2926f7a14873e">&#9670;&#160;</a></span>totalLength</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int igtl::PacketBuffer::totalLength</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00118">118</a> of file <a class="el" href="igtlMessageRTPWrapper_8h_source.html">igtlMessageRTPWrapper.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="igtlMessageRTPWrapper_8h_source.html#l00114">PacketBuffer()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="igtlMessageRTPWrapper_8h_source.html">igtlMessageRTPWrapper.h</a></li>
</ul>
</div><!-- contents -->
<hr><address><small>
Generated at Tue Sep 9 2025 15:29:16 for OpenIGTLink  by <a href="http://www.stack.nl/~dimitri/doxygen/index.html"> <img 
src="http://www.stack.nl/~dimitri/doxygen/doxygen.png" alt="doxygen"
align="middle" border=0 width=104 height=31>
</a> 1.14.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2012</small></address>
</body>
</html>
